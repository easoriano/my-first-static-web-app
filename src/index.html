<!--<!DOCTYPE html>
    <html>
        <head>
          <title>My Page</title>
            </head>
                <body>
                     <h1>My Page</h1>
                        
                
                        <script type = "text/javascript" src="web.js"></script>
         
                        <p>Click the following button to see the function in action</p>  
                        <button type = "button1" onclick = "diabeties()" value = "Display">  
 
        </body>  
</html>-->

<!--<html>
  <head>
    <title>My App</title>
  </head>
  <body>
    <h1>Output</h1>
    <p>PatientID: {{ output.PatientID }}</p>
    <p>DiabetesPrediction: {{ output.DiabetesPrediction }}</p>
    <p>Probability: {{ output.Probability }}</p>
  </body>
</html>-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>My HTML Page</title>
  </head>
  <body>
    <h1>My Diabetes Results</h1>
    <button onclick="getDiabetesResults()">Get Results</button>
    <p id="diabetes-results"></p>
    <script>
      function getDiabetesResults() {
        const data = {
          "Inputs": {
            "input1": [
              {
                "PatientID": 1882185,
                "Pregnancies": 9,
                "PlasmaGlucose": 104,
                "DiastolicBloodPressure": 51,
                "TricepsThickness": 7,
                "SerumInsulin": 24,
                "BMI": 27.36983156,
                "DiabetesPedigree": 1.3504720469999998,
                "Age": 43
              }
            ]
          },
          "GlobalParameters": {}
        };
        const postData = JSON.stringify(data);
        const options = {
          hostname: '20.252.33.64',
          port: 80,
          path: '/api/v1/service/predict-diabetes/score',
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Content-Length': postData.length,
            'Authorization': 'Bearer ' + crDbBjiIZb2mgOGcJQnT7BPFsR5R64QZ,
          }
        };
        const req = new XMLHttpRequest();
        req.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            const response = JSON.parse(this.responseText);
            const labels = response.Results.output1[0].Scored Labels;
            const probability = response.Results.output1[0].Scored Probabilities[1];
            const message = `The patient is predicted to have diabetes with a probability of ${probability.toFixed(2)}%`;
            document.getElementById("diabetes-results").innerHTML = message;
          }
        };
        req.open("POST", "http://20.252.33.64/api/v1/service/predict-diabetes/score", true);
        req.setRequestHeader("Content-Type", "application/json");
        req.setRequestHeader("Authorization", "Bearer " + crDbBjiIZb2mgOGcJQnT7BPFsR5R64QZ);
        req.send(postData);
      }
    </script>
  </body>
</html>




