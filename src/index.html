<!--<!DOCTYPE html>
    <html>
        <head>
          <title>My Page</title>
            </head>
                <body>
                     <h1>My Page</h1>
                        
                
                        <script type = "text/javascript" src="web.js"></script>
         
                        <p>Click the following button to see the function in action</p>  
                        <button type = "button1" onclick = "diabeties()" value = "Display">  
 
        </body>  
</html>-->

<!--<html>
  <head>
    <title>My App</title>
  </head>
  <body>
    <h1>Output</h1>
    <p>PatientID: {{ output.PatientID }}</p>
    <p>DiabetesPrediction: {{ output.DiabetesPrediction }}</p>
    <p>Probability: {{ output.Probability }}</p>
  </body>
</html>-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>My HTML Page</title>
  </head>
  <body>
    <h1>My Diabetes Results</h1>
    <div id="results"></div>
    <script>
      function getDiabetesResults() {
        const data =  {
          "Inputs": {
            "input1": [
              {
                "PatientID": 1882185,
                "Pregnancies": 9,
                "PlasmaGlucose": 104,
                "DiastolicBloodPressure": 51,
                "TricepsThickness": 7,
                "SerumInsulin": 24,
                "BMI": 27.36983156,
                "DiabetesPedigree": 1.3504720469999998,
                "Age": 43
              }
            ]
          },
          "GlobalParameters": {}
        };

        const postData = JSON.stringify(data);

        const options = {
          hostname: '20.252.33.64',
          port: 80,
          path: '/api/v1/service/predict-diabetes/score',
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Content-Length': postData.length,
            'Authorization': 'Bearer ' + 'crDbBjiIZb2mgOGcJQnT7BPFsR5R64QZ',
          }
        };

        const req = https.request(options, (res) => {
          console.log(`statusCode: ${res.statusCode}`);
          let responseData = '';

          res.on('data', (d) => {
            responseData += d;
          });

          res.on('end', () => {
            const results = JSON.parse(responseData);
            const labels = results.Results.output1[0].Scored Labels;
            const probability = results.Results.output1[0].Scored Probabilities;
            const html = `<p>Labels: ${labels}</p><p>Probability: ${probability}</p>`;
            document.getElementById('results').innerHTML = html;
          });
        });

        req.on('error', (error) => {
          console.error(error);
        });

        req.write(postData);
        req.end();
      }
      getDiabetesResults();
    </script>
  </body>
</html>





